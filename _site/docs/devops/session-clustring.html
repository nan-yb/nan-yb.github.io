<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"><link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(6) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(6) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(6) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(6) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(6) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; }</style><script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico" type="image/x-icon"><title>세션 클러스터링 | YBlog</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="세션 클러스터링" /><meta property="og:locale" content="en_US" /><meta name="description" content="YBlog" /><meta property="og:description" content="YBlog" /><link rel="canonical" href="http://localhost:4000/docs/devops/session-clustring.html" /><meta property="og:url" content="http://localhost:4000/docs/devops/session-clustring.html" /><meta property="og:site_name" content="YBlog" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="세션 클러스터링" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"YBlog","headline":"세션 클러스터링","url":"http://localhost:4000/docs/devops/session-clustring.html"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> YBlog </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="/docs/configuration.html" class="nav-list-link">Configuration</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in UI Components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ui-components" class="nav-list-link">UI Components</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/ui-components/typography.html" class="nav-list-link">Typography</a><li class="nav-list-item"><a href="/docs/ui-components/buttons.html" class="nav-list-link">Buttons</a><li class="nav-list-item"><a href="/docs/ui-components/labels.html" class="nav-list-link">Labels</a><li class="nav-list-item"><a href="/docs/ui-components/tables.html" class="nav-list-link">Tables</a><li class="nav-list-item"><a href="/docs/ui-components/lists.html" class="nav-list-link">Lists</a><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Code category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/ui-components/code.html" class="nav-list-link">Code</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/ui-components/code/line-numbers/" class="nav-list-link">Code with line numbers</a></ul><li class="nav-list-item"><a href="/docs/ui-components/callouts.html" class="nav-list-link">Callouts</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Utilities category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/utilities" class="nav-list-link">Utilities</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/utilities/color.html" class="nav-list-link">Color</a><li class="nav-list-item"><a href="/docs/utilities/layout.html" class="nav-list-link">Layout</a><li class="nav-list-item"><a href="/docs/utilities/responsive-modifiers.html" class="nav-list-link">Responsive Modifiers</a><li class="nav-list-item"><a href="/docs/utilities/typography.html" class="nav-list-link">Typography</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in think category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/think" class="nav-list-link">think</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/think/2023-11-14-first-article.html" class="nav-list-link">첫번째 게시글</a><li class="nav-list-item"><a href="/docs/think/2023-11-15-MSA.html" class="nav-list-link">MSA란?</a></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in db category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/db/db.html" class="nav-list-link">db</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in db category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/db/redis/redis.html" class="nav-list-link">db</a><ul class="nav-list"></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Layout category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/layout/layout.html" class="nav-list-link">Layout</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in A minimal layout page category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/layout/minimal/minimal.html" class="nav-list-link">A minimal layout page</a><ul class="nav-list"><li class="nav-list-item"> <a href="/docs/layout/minimal/default-child.html" class="nav-list-link">Default layout child page</a><li class="nav-list-item"> <a href="/docs/layout/minimal/minimal-child.html" class="nav-list-link">Minimal layout child page</a></ul></ul><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in devops category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/devops/devops.html" class="nav-list-link">devops</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/devops/kafka.html" class="nav-list-link">Kafka 명령어</a><li class="nav-list-item"><a href="/docs/devops/session-clustring.html" class="nav-list-link">세션 클러스터링</a></ul><li class="nav-list-item"><a href="/docs/navigation-structure.html" class="nav-list-link">Navigation Structure</a><li class="nav-list-item"><a href="/docs/customization.html" class="nav-list-link">Customization</a><li class="nav-list-item"><a href="/docs/search.html" class="nav-list-link">Search</a><li class="nav-list-item"><a href="/docs/index-test.html" class="nav-list-link">Markdown kitchen sink</a><li class="nav-list-item"><a href="/CHANGELOG.html" class="nav-list-link">CHANGELOG</a><li class="nav-list-item"><a href="/MIGRATION.html" class="nav-list-link">Migration and Upgrading</a></ul><ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/nan-yb/nan-yb.github.io" class="nav-list-link external" > Just the Docs on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search YBlog" aria-label="Search YBlog" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/nan-yb/nan-yb.github.io" class="site-button" > Just the Docs on GitHub </a></ul></nav></div><div class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/docs/devops/devops.html">devops</a><li class="breadcrumb-nav-list-item"><span>세션 클러스터링</span></ol></nav><div id="main-content" class="main-content"><main><p class="note">면접 보러 다니던 당시에 알고있던 지식임에도 제대로 대답을 하지못하여 정리하고자 한다.</p><hr /><h1 id="세션-클러스터링이란"> <a href="#세션-클러스터링이란" class="anchor-heading" aria-labelledby="세션-클러스터링이란"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 세션 클러스터링이란?</h1><p>세션은 서버 1대에 하나의 저장소가 형성된다. <br /> <img src="./images/session1.png" alt="세션1" /> 나누어진 세션 저장소에 대한 별도의 처리가 없다면 각각의 세션들은 정합성 이슈를 발생시킨다. 위 그림처럼 여러 대로 나뉜 서버가 하나의 서비스를 운영하기 위해서는 4개의 분리된 세션을 하나의 시스템처럼 동작하게 하거나 , 고정된 세션을 사용하여야 합니다.</p><p>세션 클러스터링은 2대 이상의 WAS 또는 서버를 사용할 때 로드 밸런싱, 장애 대비 등 세션 을 공유하는 것을 의미한다. 세션은 사용자 정보 또는 방문기록을 WAS 메모리에 저장하여, 클라이언트와 서버 간 고유한 세션 ID를 통해 Stateless한 연관성을 설정하는 것을 의미한다.</p><p class="highlight"><b>로드밸런싱이란?</b><br /> 여러 대의 서버를 두고 트래픽을 분산처리하여 서버의 로드율 증가, 부하량, 속도저하 등을 해결해주는 서비스.</p><h2 id="로드밸런스-사용-시-세션-관리-문제를-해결하는-방식"> <a href="#로드밸런스-사용-시-세션-관리-문제를-해결하는-방식" class="anchor-heading" aria-labelledby="로드밸런스-사용-시-세션-관리-문제를-해결하는-방식"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 로드밸런스 사용 시 세션 관리 문제를 해결하는 방식</h2><ol><li>Sticky Session 방식</ol><p>Sticky Session 이란 말 그대로 고정된 세션을 의미한다.</p><p><img src="./images/sticky-session.png" alt="Sticky Session" /></p><p>즉, Load Balancer는 User가 첫 번째 세션을 생성한 서버로 모든 요청을 리다이렉트 하여 고정된 세션만 사용하게 합니다. 이를 위해서 로드 밸런서는 요청을 받으면 가장 먼저 요청에 쿠키가 존재하는지 확인합니다. 쿠키가 있으면 해당 요청이 쿠키에 지정된 서버로 전송됩니다. 쿠키가 없는 경우에는 로드 밸런서가 기존 로드 밸런싱 알고리즘을 기반으로 서버를 선정합니다.<br /> 동일한 사용자가 계속 해당 서버에 요청을 보낼 수 있도록 지속적으로 서버 정보가 쿠키를 통해 응답에 삽입되어 보내집니다.</p><p>👍 Good</p><ul><li>유저는 세션이 유지되는 동안 동일한 서버만을 사용하기 때문에 정합성 이슈에서 자유로워질 수 있습니다.</ul><p>👎 Bad</p><ul><li>고정된 세션을 사용한다는 것은 특정 서버에 트래픽이 집중될 위험이 있습니다.<li>특정 서버 Fail시 해당 서버에 붙어 있는 세션들이 소실될 수 있다.</ul><ol><li>Session Clustring 기법</ol><hr /><p>출처:</p><ul><li><p><a href="https://inpa.tistory.com/entry/WEB-🌐-세션Session-불일치-문제-해결법-⸢서버-다중화-환경-⸥#서버_다중화_환경에서의_세션_불일치">https://inpa.tistory.com/entry/WEB-🌐-세션Session-불일치-문제-해결법-⸢서버-다중화-환경-⸥#서버_다중화_환경에서의_세션_불일치</a></p><li><p><a href="https://hyuntaeknote.tistory.com/6">https://hyuntaeknote.tistory.com/6</a></p></ul></main></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
